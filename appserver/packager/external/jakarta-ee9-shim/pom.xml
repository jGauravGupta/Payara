<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~
  ~  DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
  ~
  ~  Copyright (c) 2022 Payara Foundation and/or its affiliates. All rights reserved.
  ~
  ~  The contents of this file are subject to the terms of either the GNU
  ~  General Public License Version 2 only ("GPL") or the Common Development
  ~  and Distribution License("CDDL") (collectively, the "License").  You
  ~  may not use this file except in compliance with the License.  You can
  ~  obtain a copy of the License at
  ~  https://github.com/payara/Payara/blob/master/LICENSE.txt
  ~  See the License for the specific
  ~  language governing permissions and limitations under the License.
  ~
  ~  When distributing the software, include this License Header Notice in each
  ~  file and include the License file at glassfish/legal/LICENSE.txt.
  ~
  ~  GPL Classpath Exception:
  ~  The Payara Foundation designates this particular file as subject to the "Classpath"
  ~  exception as provided by the Payara Foundation in the GPL Version 2 section of the License
  ~  file that accompanied this code.
  ~
  ~  Modifications:
  ~  If applicable, add the following below the License Header, with the fields
  ~  enclosed by brackets [] replaced by your own identifying information:
  ~  "Portions Copyright [year] [name of copyright owner]"
  ~
  ~  Contributor(s):
  ~  If you wish your version of this file to be governed by only the CDDL or
  ~  only the GPL Version 2, indicate your decision by adding "[Contributor]
  ~  elects to include this software in this distribution under the [CDDL or GPL
  ~  Version 2] license."  If you don't indicate a single choice of license, a
  ~  recipient has the option to distribute your version of this file under
  ~  either the CDDL, the GPL Version 2 or to extend the choice of license to
  ~  its licensees as provided above.  However, if you add GPL Version 2 code
  ~  and therefore, elected the GPL Version 2 license, then the option applies
  ~  only if the new code is made subject to such option by the copyright
  ~  holder.
  ~
  -->

<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>external</artifactId>
        <groupId>fish.payara.server.internal.packager</groupId>
        <version>6.2022.1.Alpha3-SNAPSHOT</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>jakarta-ee9-shim</artifactId>
    <description>
        Reexport some EE10 packages in versions compatible with EE9 so that some APIs and components continue
        to work.
    </description>

    <dependencies>
        <dependency>
            <groupId>jakarta.servlet</groupId>
            <artifactId>jakarta.servlet-api</artifactId>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>jakarta.servlet.jsp</groupId>
            <artifactId>jakarta.servlet.jsp-api</artifactId>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>jakarta.el</groupId>
            <artifactId>jakarta.el-api</artifactId>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>jakarta.enterprise</groupId>
            <artifactId>jakarta.enterprise.cdi-api</artifactId>
            <scope>provided</scope>
        </dependency>
        
        <dependency>
            <groupId>jakarta.authentication</groupId>
            <artifactId>jakarta.authentication-api</artifactId>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>jakarta.xml.bind</groupId>
            <artifactId>jakarta.xml.bind-api</artifactId>
            <scope>provided</scope>
        </dependency>
        
        <dependency>
            <groupId>jakarta.servlet.jsp.jstl</groupId>
            <artifactId>jakarta.servlet.jsp.jstl-api</artifactId>   
            <scope>provided</scope>
        </dependency>     
        <dependency>
            <groupId>jakarta.authentication</groupId>
            <artifactId>jakarta.authentication-api</artifactId>
            <scope>provided</scope>
        </dependency>  
        <dependency>
            <groupId>jakarta.security.enterprise</groupId>
            <artifactId>jakarta.security.enterprise-api</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish.soteria</groupId>
            <artifactId>jakarta.security.enterprise</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish.soteria</groupId>
            <artifactId>jakarta.security.enterprise</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.jboss.weld</groupId>
            <artifactId>weld-osgi-bundle</artifactId>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <executions>
                    <execution>
                        <id>make-transition-exports</id>
                        <goals>
                            <goal>bundle</goal>
                        </goals>
                        <phase>package</phase>
                        <configuration>
                            <instructions>
                                <!-- ignore warnings -->
                                <_fixupmessages>set to different values in the source,JAR is empty</_fixupmessages>
                                <!-- Add symbolic bundle names of API bundles here -->
                                <Require-Bundle>
                                    jakarta.servlet-api,
                                    jakarta.el-api,
                                    jakarta.servlet.jsp-api,
                                    jakarta.enterprise.cdi-api,
                                    jakarta.interceptor-api,
                                    jakarta.xml.bind-api,
                                    jakarta.security.auth.message-api,
                                    com.sun.xml.bind.jaxb-osgi,
                                    jakarta.servlet.jsp.jstl-api,
                                    jakarta.security.enterprise-api,
                                    org.glassfish.jakarta.security.enterprise,
                                    org.jboss.weld.osgi-bundle
                                </Require-Bundle>
                                <!-- Manually specify the shim versions of packages to be exported via this bundle -->
                                <!-- Note the "shortened" syntax here: For every API the packages are delimited with
                                semicolon, then followed with version attribute and shim attribute (this one is
                                informational though). Spares from repeating the version for every package of the api.
                                 We drop uses attributes as well.-->
                                <Export-Package>
                                    <!-- Servlet -->
                                    jakarta.servlet;
                                    jakarta.servlet.annotation;
                                    jakarta.servlet.descriptor;
                                    jakarta.servlet.http;
                                    jakarta.servlet.resources;version="5.0.99";shim="true",
                                    <!-- JSP -->
                                    jakarta.servlet.jsp;
                                    jakarta.servlet.jsp.el;
                                    jakarta.servlet.jsp.tagext;version="3.0.99";shim="true",
                                    <!-- EL -->
                                    jakarta.el;version="4.0.99";shim="true",

                                    <!-- Interceptor forward shim (2.0 -> 2.1) -->
                                    jakarta.interceptor;version="2.1.99";shim=true,
                                    <!-- CDI. enable after upgrade -->
                                    jakarta.decorator;
                                    jakarta.enterprise.context;
                                    jakarta.enterprise.context.control;
                                    jakarta.enterprise.context.spi;
                                    jakarta.enterprise.event;
                                    jakarta.enterprise.inject;
                                    jakarta.enterprise.inject.literal;
                                    jakarta.enterprise.inject.se;
                                    jakarta.enterprise.inject.spi;
                                    jakarta.enterprise.inject.spi.configurator;
                                    jakarta.enterprise.util;version="4.0.99";shim="true",

                                    <!-- Jakarta Authentication -->
                                    jakarta.security.auth.message.callback;
                                    jakarta.security.auth.message.config;
                                    jakarta.security.auth.message.module;
                                    jakarta.security.auth.message;version="2.0.0";shim="true",

                                    <!-- XML WS -->
                                    org.apache.xml.security;version="2.3.99";shim="true",

                                    <!-- Jakarta XML Binding - forward shim (4 exported as 3) -->
                                    jakarta.xml.bind;
                                    jakarta.xml.bind.annotation;
                                    jakarta.xml.bind.annotation.adapters;
                                    jakarta.xml.bind.attachment;
                                    jakarta.xml.bind.helpers;
                                    jakarta.xml.bind.util;
                                    com.sun.codemodel;
                                    com.sun.codemodel.fmt;
                                    com.sun.codemodel.util;
                                    com.sun.codemodel.writer;
                                    com.sun.codemodel;
                                    com.sun.codemodel.fmt;
                                    com.sun.codemodel.util;
                                    com.sun.codemodel.writer;
                                    com.sun.istack.tools;
                                    com.sun.tools.rngdatatype;
                                    com.sun.tools.rngdatatype.helpers;
                                    com.sun.tools.rngom.ast.builder;
                                    com.sun.tools.rngom.ast.om;
                                    com.sun.tools.rngom.ast.util;
                                    com.sun.tools.rngom.digested;
                                    com.sun.tools.rngom.dt;
                                    com.sun.tools.rngom.dt.builtin;
                                    com.sun.tools.rngom.nc;
                                    com.sun.tools.rngom.parse;
                                    com.sun.tools.rngom.parse.compact;
                                    com.sun.tools.rngom.parse.xml;
                                    com.sun.tools.rngom.xml.sax;
                                    com.sun.tools.rngom.xml.util;
                                    com.sun.tools.xjc;
                                    com.sun.tools.xjc.api;
                                    com.sun.tools.xjc.generator.bean;
                                    com.sun.tools.xjc.generator.bean.field;
                                    com.sun.tools.xjc.model;
                                    com.sun.tools.xjc.model.nav;
                                    com.sun.tools.xjc.outline;
                                    com.sun.tools.xjc.reader;
                                    com.sun.tools.xjc.reader.gbind;
                                    com.sun.tools.xjc.reader.internalizer;
                                    com.sun.tools.xjc.reader.xmlschema;
                                    com.sun.tools.xjc.reader.xmlschema.bindinfo;
                                    com.sun.tools.xjc.util;
                                    com.sun.xml.dtdparser;
                                    com.sun.xml.xsom;
                                    com.sun.xml.xsom.impl;
                                    com.sun.xml.xsom.impl.parser;
                                    com.sun.xml.xsom.impl.util;
                                    com.sun.xml.xsom.parser;
                                    com.sun.xml.xsom.util;
                                    com.sun.xml.xsom.visitor;
                                    org.glassfish.jaxb.core;
                                    org.glassfish.jaxb.core.annotation;
                                    org.glassfish.jaxb.core.api;
                                    org.glassfish.jaxb.core.api.impl;
                                    org.glassfish.jaxb.core.marshaller;
                                    org.glassfish.jaxb.core.unmarshaller;
                                    org.glassfish.jaxb.core.util;
                                    org.glassfish.jaxb.core.v2;
                                    org.glassfish.jaxb.core.v2.model.annotation;
                                    org.glassfish.jaxb.core.v2.model.core;
                                    org.glassfish.jaxb.core.v2.model.impl;
                                    org.glassfish.jaxb.core.v2.model.nav;
                                    org.glassfish.jaxb.core.v2.model.util;
                                    org.glassfish.jaxb.core.v2.runtime;
                                    org.glassfish.jaxb.core.v2.runtime.unmarshaller;
                                    org.glassfish.jaxb.core.v2.schemagen.episode;
                                    org.glassfish.jaxb.core.v2.util;
                                    org.glassfish.jaxb.runtime;
                                    org.glassfish.jaxb.runtime.api;
                                    org.glassfish.jaxb.runtime.marshaller;
                                    org.glassfish.jaxb.runtime.unmarshaller;
                                    org.glassfish.jaxb.runtime.util;
                                    org.glassfish.jaxb.runtime.v2;
                                    org.glassfish.jaxb.runtime.v2.model.annotation;
                                    org.glassfish.jaxb.runtime.v2.model.impl;
                                    org.glassfish.jaxb.runtime.v2.model.runtime;
                                    org.glassfish.jaxb.runtime.v2.runtime;
                                    org.glassfish.jaxb.runtime.v2.runtime.output;
                                    org.glassfish.jaxb.runtime.v2.runtime.property;
                                    org.glassfish.jaxb.runtime.v2.runtime.reflect;
                                    org.glassfish.jaxb.runtime.v2.runtime.unmarshaller;
                                    org.glassfish.jaxb.runtime.v2.schemagen;
                                    org.glassfish.jaxb.runtime.v2.schemagen.xmlschema;
                                    org.glassfish.jaxb.runtime.v2.util;version="3.0.99";shim="true",

                                    <!-- JSTL -->
                                    jakarta.servlet.jsp.jstl.core;
                                    jakarta.servlet.jsp.jstl.tlv;
                                    jakarta.servlet.jsp.jstl.sql;
                                    jakarta.servlet.jsp.jstl.fmt;version="2.0.0";shim="true",
                                    
                                    jakarta.security.auth.message.callback;
                                    jakarta.security.auth.message.config;
                                    jakarta.security.auth.message.module;
                                    jakarta.security.auth.message;version="2.0.0";shim="true",
                                    
                                    jakarta.security.enterprise;
                                    jakarta.security.enterprise.authentication.mechanism.http;
                                    jakarta.security.enterprise.authentication.mechanism.http.openid;
                                    jakarta.security.enterprise.credential;
                                    jakarta.security.enterprise.identitystore;
                                    jakarta.security.enterprise.identitystore.openid;version="2.0.0";shim="true",
                                    
                                    org.glassfish.soteria;
                                    org.glassfish.soteria.authorization;
                                    org.glassfish.soteria.authorization.spi;
                                    org.glassfish.soteria.authorization.spi.impl;
                                    org.glassfish.soteria.cdi;
                                    org.glassfish.soteria.cdi.spi;
                                    org.glassfish.soteria.cdi.spi.impl;
                                    org.glassfish.soteria.identitystores;
                                    org.glassfish.soteria.identitystores.annotation;
                                    org.glassfish.soteria.identitystores.hash;
                                    org.glassfish.soteria.mechanisms;
                                    org.glassfish.soteria.mechanisms.jaspic;
                                    org.glassfish.soteria.mechanisms.openid;
                                    org.glassfish.soteria.mechanisms.openid.controller;
                                    org.glassfish.soteria.mechanisms.openid.domain;
                                    org.glassfish.soteria.servlet;version="2.0.1";shim="true",

                                    <!-- Required by org.glassfish.soteria.spi.bean.decorator.weld-->
                                    org.jboss.weld;
                                    org.jboss.weld.annotated;
                                    org.jboss.weld.annotated.enhanced;
                                    org.jboss.weld.annotated.enhanced.jlr;
                                    org.jboss.weld.annotated.runtime;
                                    org.jboss.weld.annotated.slim;
                                    org.jboss.weld.annotated.slim.backed;
                                    org.jboss.weld.annotated.slim.unbacked;
                                    org.jboss.weld.bean;
                                    org.jboss.weld.bean.attributes;
                                    org.jboss.weld.bean.builtin;
                                    org.jboss.weld.bean.builtin.ee;
                                    org.jboss.weld.bean.interceptor;
                                    org.jboss.weld.bean.proxy;
                                    org.jboss.weld.bean.proxy.util;
                                    org.jboss.weld.bootstrap;
                                    org.jboss.weld.bootstrap.api;
                                    org.jboss.weld.bootstrap.api.helpers;
                                    org.jboss.weld.bootstrap.enablement;
                                    org.jboss.weld.bootstrap.event;
                                    org.jboss.weld.bootstrap.events;
                                    org.jboss.weld.bootstrap.events.configurator;
                                    org.jboss.weld.bootstrap.spi;
                                    org.jboss.weld.bootstrap.spi.helpers;
                                    org.jboss.weld.config;
                                    org.jboss.weld.configuration.spi;
                                    org.jboss.weld.configuration.spi.helpers;
                                    org.jboss.weld.config;
                                    org.jboss.weld.configuration.spi;
                                    org.jboss.weld.configuration.spi.helpers;
                                    org.jboss.weld.construction.api;
                                    org.jboss.weld.context;
                                    org.jboss.weld.context.activator;
                                    org.jboss.weld.context.api;
                                    org.jboss.weld.context.bound;
                                    org.jboss.weld.context.ejb;
                                    org.jboss.weld.context.http;
                                    org.jboss.weld.context.unbound;
                                    org.jboss.weld.contexts;
                                    org.jboss.weld.contexts.activator;
                                    org.jboss.weld.contexts.beanstore;
                                    org.jboss.weld.contexts.bound;
                                    org.jboss.weld.contexts.cache;
                                    org.jboss.weld.contexts.conversation;
                                    org.jboss.weld.contexts.unbound;
                                    org.jboss.weld.ejb.api;
                                    org.jboss.weld.ejb.spi;
                                    org.jboss.weld.ejb.spi.helpers;
                                    org.jboss.weld.event;
                                    org.jboss.weld.events;
                                    org.jboss.weld.exceptions;
                                    org.jboss.weld.executor;
                                    org.jboss.weld.inject;
                                    org.jboss.weld.injection;
                                    org.jboss.weld.injection.attributes;
                                    org.jboss.weld.injection.producer;
                                    org.jboss.weld.injection.spi;
                                    org.jboss.weld.injection.spi.helpers;
                                    org.jboss.weld.interceptor;
                                    org.jboss.weld.interceptor.builder;
                                    org.jboss.weld.interceptor.proxy;
                                    org.jboss.weld.interceptor.reader;
                                    org.jboss.weld.interceptor.spi.metadata;
                                    org.jboss.weld.interceptor.spi.model;
                                    org.jboss.weld.interceptor.util;
                                    org.jboss.weld.interceptor.util.proxy;
                                    org.jboss.weld.literal;
                                    org.jboss.weld.logging;
                                    org.jboss.weld.manager;
                                    org.jboss.weld.manager.api;
                                    org.jboss.weld.metadata;
                                    org.jboss.weld.metadata.cache;
                                    org.jboss.weld.module;
                                    org.jboss.weld.module.ejb;
                                    org.jboss.weld.module.ejb.context;
                                    org.jboss.weld.module.ejb.context.beanstore;
                                    org.jboss.weld.module.jsf;
                                    org.jboss.weld.module.jsf.servlet;
                                    org.jboss.weld.module.jta;
                                    org.jboss.weld.module.web;
                                    org.jboss.weld.module.web.context.beanstore.http;
                                    org.jboss.weld.module.web.context.http;
                                    org.jboss.weld.module.web.el;
                                    org.jboss.weld.module.web.logging;
                                    org.jboss.weld.module.web.servlet;
                                    org.jboss.weld.module.web.util.el;
                                    org.jboss.weld.module.web.util.servlet;
                                    org.jboss.weld.persistence;
                                    org.jboss.weld.probe;
                                    org.jboss.weld.proxy;
                                    org.jboss.weld.resolution;
                                    org.jboss.weld.resources;
                                    org.jboss.weld.resources.spi;
                                    org.jboss.weld.resources.spi.helpers;
                                    org.jboss.weld.security;
                                    org.jboss.weld.security.spi;
                                    org.jboss.weld.serialization;
                                    org.jboss.weld.serialization.spi;
                                    org.jboss.weld.serialization.spi.helpers;
                                    org.jboss.weld.servlet.api;
                                    org.jboss.weld.servlet.api.helpers;
                                    org.jboss.weld.servlet.spi;
                                    org.jboss.weld.servlet.spi.helpers;
                                    org.jboss.weld.transaction.spi;
                                    org.jboss.weld.util;
                                    org.jboss.weld.util.annotated;
                                    org.jboss.weld.util.bean;
                                    org.jboss.weld.util.bytecode;
                                    org.jboss.weld.util.cache;
                                    org.jboss.weld.util.collections;
                                    org.jboss.weld.util.reflection;
                                    org.jboss.weld.ws;
                                    org.jboss.weld.xml;version="5.0";shim="true"

                                    <!-- Minimal version of shim for MP 5.0. -->
                                    <!-- TODO: This is only thing that should remain in final release -->
                                    <!--
                                    jakarta.enterprise.util;
                                    jakarta.enterprise.inject;
                                    jakarta.enterprise.context;version="3.0.99";shim=true
                                    -->
                                </Export-Package>
                            </instructions>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project>
